README.txt

For R and Bash scripts to analyze and display a Tree

Taking an output dendrogram from the program <hClust>, these scripts are to be
run to generate the filtered dendrogram and output its leaves

In order of how they should be run:

outputResults.sh
Usage: ./outputResults <dendrogram name> <dendrogram mask> <to cut number> <output name (cluster results)> <output name (children at cuts)>

findCut.sh
Used by outputResults.sh to find the parent of two children in consecutive cuts

analyze_createdChildrenAt.sh
The output of outputResults.sh will be, besides the ones specified as
parameters, many *.nii with names createdChildrenAtXXX.nii. These files are
simply the unbucketed children at cuts. 

WARNING: This programs currently takes a while to run.

Note: This program doesn't generate output, but its sub-routine childrenStatistics.R does

Usage: ./analyze_createdChildrenAt.sh <full cc matrix>

childrenStatistics.R
Used by analyze_createdChildrenAt.sh to output statistics for each cluster for
filtering purposes later on. The Programs assumes input to be in the format of
2 cc matrices generated by analyze_createdChildrenAt.sh called firstChild.cc
and secondChild.cc. The Program also takes an arguemnt which is the cut level.
It doesn't do anything with it just puts it as a field in the output. 

Note: This program also defaults output to cutStats.txt

filterTree.R
This programs filters the rows of the output from childrenStatistics.R
according to certain criterion.

Currently it only does filter by size. 

Currently the criterion is hard-coded into the program.

Usage: ./filterTree.R <cutStats.txt> <output name.txt>

buildTree.R
The program takes the output of childrenStatistics.R, or filterTree.R, and
makes a table to be used to create a dendrogram in R and extract relevant leaves.

This program used findMother.sh for parent-finding.

Note its output is table as a text file wherein is information about the cut
number, left child index, and right child index. The indices are negative if
they are leaves. Positive indices indicates that they are nodes that are
defined in ROW NUMBER (starting from 1) equivalent to the value of the postive
index  

Usage: ./buildTree.R <output txt file from filterTree.R or childrenStatistics.R> <output table name>

makeDendrogram.R
This programs takes as input the output from buildTree.R and makes an R
dendrogram object from it.

Note: R objects are stored as XXX.Rda so the output should have this extension
for clarity. The object can then be loaded and viewed in the folloing fashion:

in R console, load('<object.Rda>'), then the object will be loaded and will
have the default, hard-coded name "ad". Plot by plot(ad,horiz=T,xlim=c(1,0))

Usage: ./makeDendroram.R <input table name> <output R object name.Rda>

makeLeaves.R
This program takes as input the output from buildTree.R and extracts the leaves
from the files createdChildrenAtXXX.nii.

The program defaults output to clusterXXX.nii

Note: mergeClusters.sh should almost alwyas be run afterwards.

Usage: ./makeLeaves.R <input table name>

mergeClusters.R
This programs takes the clusters generated from makeLeaves.R and makes them
nicer and merges them together.

Note: The program assumes input as clusterXXX.nii and outputs 1mmclusterXX.nii
(interpolated), and mergedX.nii, which is the merged files where X is NOT in
the XXX format. The mergedX.nii file with the largest X is usually the file one
wants.

./Usage ./mergeClusters.R
